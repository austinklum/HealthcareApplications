@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    ViewBag.Title = "UserDashBoard";
}

    <fieldset>
        <legend>User DashBoard</legend>
        @if (HttpContextAccessor.HttpContext.Session.GetString("HealthcareUsername") != null)
        {
            <p>
                <text>Welcome @HttpContextAccessor.HttpContext.Session.GetString("HealthcareUsername").ToString()</text>
            </p>
            <p>
                <text>You are a @HttpContextAccessor.HttpContext.Session.GetString("HealthcareRole").ToString()</text>
            </p>
            @if (HttpContextAccessor.HttpContext.Session.GetString("HealthcareRole").ToString() == "Physician")
            {
                @await Component.InvokeAsync("PatientsList", new { searchPhysician = HttpContextAccessor.HttpContext.Session.GetString("HealthcarePhysicianId").ToString(), searchPatient = "" })
            }
            else
            {
                @await Component.InvokeAsync("PatientsList", new { searchPhysician = "", searchPatient = HttpContextAccessor.HttpContext.Session.GetString("HealthcarePatientId").ToString() })
            }
        }
        @using (Html.BeginForm("LogOut", "Home", FormMethod.Post))
        {
            <input type="submit" value="Log out" class="btn btn-danger btn-block text-light" style="width:15%" />
        }
    </fieldset>
